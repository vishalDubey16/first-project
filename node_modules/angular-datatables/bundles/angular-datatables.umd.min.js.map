{"version":3,"file":"angular-datatables.umd.min.js","sources":["../src/angular-datatables.directive.js","../src/angular-datatables.module.js"],"sourcesContent":["/**\n * @license\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://raw.githubusercontent.com/l-lin/angular-datatables/master/LICENSE\n */\nimport { Directive, ElementRef, Input, Renderer2, ViewContainerRef } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nvar DataTableDirective = /** @class */ (function () {\n    function DataTableDirective(el, vcr, renderer) {\n        this.el = el;\n        this.vcr = vcr;\n        this.renderer = renderer;\n        /**\n         * The DataTable option you pass to configure your table.\n         */\n        this.dtOptions = {};\n    }\n    DataTableDirective.prototype.ngOnInit = function () {\n        var _this = this;\n        if (this.dtTrigger) {\n            this.dtTrigger.subscribe(function (options) {\n                _this.displayTable(options);\n            });\n        }\n        else {\n            this.displayTable(null);\n        }\n    };\n    DataTableDirective.prototype.ngOnDestroy = function () {\n        if (this.dtTrigger) {\n            this.dtTrigger.unsubscribe();\n        }\n        if (this.dt) {\n            this.dt.destroy(true);\n        }\n    };\n    DataTableDirective.prototype.displayTable = function (dtOptions) {\n        var _this = this;\n        // assign new options if provided\n        if (dtOptions) {\n            this.dtOptions = dtOptions;\n        }\n        this.dtInstance = new Promise(function (resolve, reject) {\n            Promise.resolve(_this.dtOptions).then(function (resolvedDTOptions) {\n                // validate object\n                var isTableEmpty = Object.keys(resolvedDTOptions).length === 0 && $('tbody tr', _this.el.nativeElement).length === 0;\n                if (isTableEmpty) {\n                    reject('Both the table and dtOptions cannot be empty');\n                    return;\n                }\n                // Using setTimeout as a \"hack\" to be \"part\" of NgZone\n                setTimeout(function () {\n                    // Assign DT properties here\n                    var options = {\n                        rowCallback: function (row, data, index) {\n                            if (resolvedDTOptions.columns) {\n                                var columns = resolvedDTOptions.columns;\n                                _this.applyNgPipeTransform(row, columns);\n                                _this.applyNgRefTemplate(row, columns, data);\n                            }\n                            // run user specified row callback if provided.\n                            if (resolvedDTOptions.rowCallback) {\n                                resolvedDTOptions.rowCallback(row, data, index);\n                            }\n                        }\n                    };\n                    // merge user's config with ours\n                    options = Object.assign({}, resolvedDTOptions, options);\n                    _this.dt = $(_this.el.nativeElement).DataTable(options);\n                    resolve(_this.dt);\n                });\n            });\n        });\n    };\n    DataTableDirective.prototype.applyNgPipeTransform = function (row, columns) {\n        // Filter columns with pipe declared\n        var colsWithPipe = columns.filter(function (x) { return x.ngPipeInstance && !x.ngTemplateRef; });\n        colsWithPipe.forEach(function (el) {\n            var pipe = el.ngPipeInstance;\n            // find index of column using `data` attr\n            var i = columns.findIndex(function (e) { return e.data === el.data; });\n            // get <td> element which holds data using index\n            var rowFromCol = row.childNodes.item(i);\n            // Transform data with Pipe\n            var rowVal = $(rowFromCol).text();\n            var rowValAfter = pipe.transform(rowVal);\n            // Apply transformed string to <td>\n            $(rowFromCol).text(rowValAfter);\n        });\n    };\n    DataTableDirective.prototype.applyNgRefTemplate = function (row, columns, data) {\n        var _this = this;\n        // Filter columns using `ngTemplateRef`\n        var colsWithTemplate = columns.filter(function (x) { return x.ngTemplateRef && !x.ngPipeInstance; });\n        colsWithTemplate.forEach(function (el) {\n            var _a = el.ngTemplateRef, ref = _a.ref, context = _a.context;\n            // get <td> element which holds data using index\n            var i = columns.findIndex(function (e) { return e.data === el.data; });\n            var cellFromIndex = row.childNodes.item(i);\n            // reset cell before applying transform\n            $(cellFromIndex).html('');\n            // render onto DOM\n            // finalize context to be sent to user\n            var _context = Object.assign({}, context, context === null || context === void 0 ? void 0 : context.userData, {\n                adtData: data\n            });\n            var instance = _this.vcr.createEmbeddedView(ref, _context);\n            _this.renderer.appendChild(cellFromIndex, instance.rootNodes[0]);\n        });\n    };\n    DataTableDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.1\", ngImport: i0, type: DataTableDirective, deps: [{ token: i0.ElementRef }, { token: i0.ViewContainerRef }, { token: i0.Renderer2 }], target: i0.ɵɵFactoryTarget.Directive });\n    DataTableDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"13.0.1\", type: DataTableDirective, selector: \"[datatable]\", inputs: { dtOptions: \"dtOptions\", dtTrigger: \"dtTrigger\" }, ngImport: i0 });\n    return DataTableDirective;\n}());\nexport { DataTableDirective };\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.1\", ngImport: i0, type: DataTableDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[datatable]'\n                }]\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.ViewContainerRef }, { type: i0.Renderer2 }]; }, propDecorators: { dtOptions: [{\n                type: Input\n            }], dtTrigger: [{\n                type: Input\n            }] } });\n//# sourceMappingURL=angular-datatables.directive.js.map","/**\n * @license\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://raw.githubusercontent.com/l-lin/angular-datatables/master/LICENSE\n */\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { DataTableDirective } from './angular-datatables.directive';\nimport * as i0 from \"@angular/core\";\nvar DataTablesModule = /** @class */ (function () {\n    function DataTablesModule() {\n    }\n    DataTablesModule.forRoot = function () {\n        return {\n            ngModule: DataTablesModule\n        };\n    };\n    DataTablesModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.1\", ngImport: i0, type: DataTablesModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\n    DataTablesModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"13.0.1\", ngImport: i0, type: DataTablesModule, declarations: [DataTableDirective], imports: [CommonModule], exports: [DataTableDirective] });\n    DataTablesModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"13.0.1\", ngImport: i0, type: DataTablesModule, imports: [[CommonModule]] });\n    return DataTablesModule;\n}());\nexport { DataTablesModule };\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.1\", ngImport: i0, type: DataTablesModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [CommonModule],\n                    declarations: [DataTableDirective],\n                    exports: [DataTableDirective]\n                }]\n        }] });\n//# sourceMappingURL=angular-datatables.module.js.map"],"names":["DataTableDirective","prototype","ngOnInit","_this","this","dtTrigger","subscribe","options","displayTable","ngOnDestroy","unsubscribe","dt","destroy","dtOptions","dtInstance","Promise","resolve","reject","then","resolvedDTOptions","Object","keys","length","$","el","nativeElement","setTimeout","rowCallback","row","data","index","columns","applyNgPipeTransform","applyNgRefTemplate","assign","DataTable","filter","x","ngPipeInstance","ngTemplateRef","forEach","pipe","i","findIndex","e","rowFromCol","childNodes","item","rowVal","text","rowValAfter","transform","_a","ref","context","cellFromIndex","html","_context","userData","adtData","instance","vcr","createEmbeddedView","renderer","appendChild","rootNodes","ɵfac","i0","ɵɵngDeclareFactory","minVersion","version","ngImport","type","deps","token","ElementRef","ViewContainerRef","Renderer2","target","ɵɵFactoryTarget","Directive","ɵdir","ɵɵngDeclareDirective","selector","inputs","ɵɵngDeclareClassMetadata","decorators","args","ctorParameters","propDecorators","Input","DataTablesModule","forRoot","ngModule","NgModule","ɵmod","ɵɵngDeclareNgModule","declarations","imports","CommonModule","exports","ɵinj","ɵɵngDeclareInjector"],"mappings":"ssBASIA,GAUAA,EAAmBC,UAAUC,SAAW,WACpC,IAAIC,EAAQC,KACRA,KAAKC,UACLD,KAAKC,UAAUC,UAAU,SAAUC,GAC/BJ,EAAMK,aAAaD,KAIvBH,KAAKI,aAAa,OAG1BR,EAAmBC,UAAUQ,YAAc,WACnCL,KAAKC,WACLD,KAAKC,UAAUK,cAEfN,KAAKO,IACLP,KAAKO,GAAGC,SAAQ,IAGxBZ,EAAmBC,UAAUO,aAAe,SAAUK,GAClD,IAAIV,EAAQC,KAERS,IACAT,KAAKS,UAAYA,GAErBT,KAAKU,WAAa,IAAIC,QAAQ,SAAUC,EAASC,GAC7CF,QAAQC,QAAQb,EAAMU,WAAWK,KAAK,SAAUC,GAEiB,IAA1CC,OAAOC,KAAKF,GAAmBG,QAAiE,IAAjDC,EAAE,WAAYpB,EAAMqB,GAAGC,eAAeH,OAEpGL,EAAO,gDAIXS,WAAW,WAEP,IAAInB,EAAU,CACVoB,YAAa,SAAUC,EAAKC,EAAMC,GAC9B,IACQC,EADJZ,EAAkBY,UACdA,EAAUZ,EAAkBY,QAChC5B,EAAM6B,qBAAqBJ,EAAKG,GAChC5B,EAAM8B,mBAAmBL,EAAKG,EAASF,IAGvCV,EAAkBQ,aAClBR,EAAkBQ,YAAYC,EAAKC,EAAMC,KAKrDvB,EAAUa,OAAOc,OAAO,GAAIf,EAAmBZ,GAC/CJ,EAAMQ,GAAKY,EAAEpB,EAAMqB,GAAGC,eAAeU,UAAU5B,GAC/CS,EAAQb,EAAMQ,WAK9BX,EAAmBC,UAAU+B,qBAAuB,SAAUJ,EAAKG,GAE5CA,EAAQK,OAAO,SAAUC,GAAK,OAAOA,EAAEC,iBAAmBD,EAAEE,gBAClEC,QAAQ,SAAUhB,GAC3B,IAAIiB,EAAOjB,EAAGc,eAEVI,EAAIX,EAAQY,UAAU,SAAUC,GAAK,OAAOA,EAAEf,OAASL,EAAGK,OAE1DgB,EAAajB,EAAIkB,WAAWC,KAAKL,GAEjCM,EAASzB,EAAEsB,GAAYI,OACvBC,EAAcT,EAAKU,UAAUH,GAEjCzB,EAAEsB,GAAYI,KAAKC,MAG3BlD,EAAmBC,UAAUgC,mBAAqB,SAAUL,EAAKG,EAASF,GACtE,IAAI1B,EAAQC,KAEW2B,EAAQK,OAAO,SAAUC,GAAK,OAAOA,EAAEE,gBAAkBF,EAAEC,iBACjEE,QAAQ,SAAUhB,GAC/B,IAAI4B,EAAK5B,EAAGe,cAAec,EAAMD,EAAGC,IAAKC,EAAUF,EAAGE,QAElDZ,EAAIX,EAAQY,UAAU,SAAUC,GAAK,OAAOA,EAAEf,OAASL,EAAGK,OAC1D0B,EAAgB3B,EAAIkB,WAAWC,KAAKL,GAExCnB,EAAEgC,GAAeC,KAAK,IAGlBC,EAAWrC,OAAOc,OAAO,GAAIoB,EAASA,MAAAA,OAAyC,EAASA,EAAQI,SAAU,CAC1GC,QAAS9B,IAET+B,EAAWzD,EAAM0D,IAAIC,mBAAmBT,EAAKI,GACjDtD,EAAM4D,SAASC,YAAYT,EAAeK,EAASK,UAAU,OAGrEjE,EAAmBkE,KAAOC,EAAGC,mBAAmB,CAAEC,WAAY,SAAUC,QAAS,SAAUC,SAAUJ,EAAIK,KAAMxE,EAAoByE,KAAM,CAAC,CAAEC,MAAOP,EAAGQ,YAAc,CAAED,MAAOP,EAAGS,kBAAoB,CAAEF,MAAOP,EAAGU,YAAcC,OAAQX,EAAGY,gBAAgBC,YACzPhF,EAAmBiF,KAAOd,EAAGe,qBAAqB,CAAEb,WAAY,SAAUC,QAAS,SAAUE,KAAMxE,EAAoBmF,SAAU,cAAeC,OAAQ,CAAEvE,UAAW,YAAaR,UAAW,aAAekE,SAAUJ,IAC/MnE,GAxGP,SAASA,EAAmBwB,EAAIqC,EAAKE,GACjC3D,KAAKoB,GAAKA,EACVpB,KAAKyD,IAAMA,EACXzD,KAAK2D,SAAWA,EAIhB3D,KAAKS,UAAY,KAoGtBwE,yBAAyB,CAAEhB,WAAY,SAAUC,QAAS,SAAUC,SAAUJ,EAAIK,KAAMxE,EAAoBsF,WAAY,CAAC,CAChHd,KAAMQ,YACNO,KAAM,CAAC,CACCJ,SAAU,kBAElBK,eAAgB,WAAc,MAAO,CAAC,CAAEhB,KAAML,EAAGQ,YAAc,CAAEH,KAAML,EAAGS,kBAAoB,CAAEJ,KAAML,EAAGU,aAAiBY,eAAgB,CAAE5E,UAAW,CAAC,CACpJ2D,KAAMkB,UACNrF,UAAW,CAAC,CACZmE,KAAMkB,iBCnHlBC,GAGAA,EAAiBC,QAAU,WACvB,MAAO,CACHC,SAAUF,IAGlBA,EAAiBzB,KAAOC,EAAGC,mBAAmB,CAAEC,WAAY,SAAUC,QAAS,SAAUC,SAAUJ,EAAIK,KAAMmB,EAAkBlB,KAAM,GAAIK,OAAQX,EAAGY,gBAAgBe,WACpKH,EAAiBI,KAAO5B,EAAG6B,oBAAoB,CAAE3B,WAAY,SAAUC,QAAS,SAAUC,SAAUJ,EAAIK,KAAMmB,EAAkBM,aAAc,CAACjG,GAAqBkG,QAAS,CAACC,gBAAeC,QAAS,CAACpG,KACvM2F,EAAiBU,KAAOlC,EAAGmC,oBAAoB,CAAEjC,WAAY,SAAUC,QAAS,SAAUC,SAAUJ,EAAIK,KAAMmB,EAAkBO,QAAS,CAAC,CAACC,mBACpIR,GAVP,SAASA,OAaVN,yBAAyB,CAAEhB,WAAY,SAAUC,QAAS,SAAUC,SAAUJ,EAAIK,KAAMmB,EAAkBL,WAAY,CAAC,CAC9Gd,KAAMsB,WACNP,KAAM,CAAC,CACCW,QAAS,CAACC,gBACVF,aAAc,CAACjG,GACfoG,QAAS,CAACpG"}